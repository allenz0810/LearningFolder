!function(){"use strict";function t(t,a){var o=this;o.tripName=t.tripName,o.stops=[],o.errorMessage="",o.isBusy=!0,o.newStop={};var e="/api/trips/"+o.tripName+"/stops";a.get(e).then(function(t){angular.copy(t.data,o.stops),n(o.stops)},function(t){o.errorMessage="Fail loading data"}).finally(function(){o.isBusy=!1}),o.addStop=function(){o.isBusy=!0,a.post(e,o.newStop).then(function(t){o.Stops.push(t.data),n(o.stops),o.newStop={}},function(t){o.errorMessage="Fail adding data"}).finally(function(){o.isBusy=!1})}}function n(t){if(t&&t.length>0){var n=_.map(t,function(t){return{lat:t.latitude,long:t.longtitude,info:t.name}});travelMap.createMap({stops:n,selector:"#map",currentStop:1,initialZoon:3})}else travelMap.createMap({stops:[{lat:33.748995,long:-84.387982,info:"Atlanta, Georgia - Departed Jun 3, 2014"},{lat:48.856614,long:2.352222,info:"Paris, France - Jun 4-24, 2014"},{lat:50.85,long:4.35,info:"Brussels, Belgium - Jun 25-27, 2014"}],selector:"#map",currentStop:0,initialZoon:3})}angular.module("app-trips").controller("tripEditorController",t)}();